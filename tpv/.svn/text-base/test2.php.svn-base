<?php

if($_POST["update"] == "1"){
  foreach($_POST as $k => $d){
    echo "$k => $d<br>";
    if(preg_match("/^([a-z0-9]+)_new$/i",$k,$dat)){
      $set .= "$dat[1] = '$d', ";
    }
  }
  $q = "UPDATE tablename SET ".substr($set,0,-2)." WHERE id = '$_POST[id]' LIMIT 1";
  echo $q;

 }

//if ($page == 2)
//{


 echo "<form method=post><table> 
<input type=hidden name=update value=1>
<input type=hidden name=id value=11201001A>
<tr> 
<td>First Name:</td> 
<td><input name=\"fname_new\" value=\"$first_name\"></td> 
</tr> 
<tr> 
<td>Last Name:</td> 
<td><input name=\"sname_new\" value=\"$last_name\"></td> 
</tr> 
<tr><td></td><td><input type=submit></td></tr>
</table>";
//}

?>